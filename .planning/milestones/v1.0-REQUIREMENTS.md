# Requirements Archive: v1.0 Similarity Scoring

**Archived:** 2026-02-07
**Status:** SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Wine Tasting Similarity Scoring

**Defined:** 2026-02-02
**Core Value:** Specific tasting descriptors should contribute more to similarity scores than generic wine structure terms

## v1 Requirements

### Weight Profiles

- [x] **WGHT-01**: Create three switchable weight profiles (inverted, moderate, data-driven)
- [x] **WGHT-02**: Inverted profile: specific notes 2.0-2.5, generic terms 0.8-1.2
- [x] **WGHT-03**: Moderate profile: specific notes 1.8-2.2, generic terms 1.0-1.5
- [x] **WGHT-04**: Data-driven profile: weights based on database analysis
- [x] **WGHT-05**: Easy configuration to switch between profiles

### Category Restructuring

- [x] **CAT-01**: Merge "mørke bær" and "røde bær" into unified "frukt" category
- [x] **CAT-02**: Align categories with Vinmonopolet tasting wheels (aromahjul/smakshjul)
- [x] **CAT-03**: Structure: Frukt (bær, sitrus, steinfrukt, tropisk, tørket), Krydder, Urter, Blomster, Eik/fat, Mineral
- [x] **CAT-04**: Lower category weight for generic structure terms (struktur, avslutning, fylde, friskhet, sødme)

### Data Analysis

- [x] **DATA-01**: Query Supabase to extract all smell/taste notes from wines table
- [x] **DATA-02**: Analyze frequency of terms to identify common vocabulary
- [x] **DATA-03**: Identify missing terms not in current lemmas
- [x] **DATA-04**: Fix typos in existing lemmas based on actual usage

### Quality & Compatibility

- [x] **QUAL-01**: Maintain localhost/server split functionality
- [x] **QUAL-02**: Local similarity works with Xenova embeddings
- [x] **QUAL-03**: Server similarity works with OpenAI embeddings
- [x] **QUAL-04**: No breaking changes to existing API signatures

### Validation

- [x] **VAL-01**: Create test cases with known note pairs
- [x] **VAL-02**: Compare before/after scores for test cases
- [x] **VAL-03**: Manual verification in app with real tastings

## v2 Requirements (Deferred)

### Future Enhancements

- **BONUS-01**: Bonus point system for identifying rare/specific notes
- **BONUS-02**: Progressive scoring that rewards more detailed descriptions
- **UI-01**: Visual feedback showing which terms contributed to score

## Out of Scope

| Feature | Reason |
|---------|--------|
| Changing ML model | Current Xenova model sufficient for this iteration |
| UI changes | Focus on scoring logic only |
| Real-time score preview | Would require significant frontend changes |
| Multi-language support | Norwegian only for now |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| DATA-01 | Phase 1 | Complete |
| DATA-02 | Phase 1 | Complete |
| DATA-03 | Phase 1 | Complete |
| DATA-04 | Phase 1 | Complete |
| CAT-01 | Phase 2 | Complete |
| CAT-02 | Phase 2 | Complete |
| CAT-03 | Phase 2 | Complete |
| CAT-04 | Phase 2 | Complete |
| WGHT-01 | Phase 3 | Complete |
| WGHT-02 | Phase 3 | Complete |
| WGHT-03 | Phase 3 | Complete |
| WGHT-04 | Phase 3 | Complete |
| WGHT-05 | Phase 3 | Complete |
| QUAL-01 | Phase 4 | Complete |
| QUAL-02 | Phase 4 | Complete |
| QUAL-03 | Phase 4 | Complete |
| QUAL-04 | Phase 4 | Complete |
| VAL-01 | Phase 5 | Complete |
| VAL-02 | Phase 5 | Complete |
| VAL-03 | Phase 5 | Complete |

---

## Milestone Summary

**Shipped:** 20 of 20 v1 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-02-07 as part of v1.0 milestone completion*
