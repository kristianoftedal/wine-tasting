---
phase: 05-validation
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - scripts/validation-results/validation-report.md
  - .planning/phases/05-validation/manual-testing-checklist.md
autonomous: false

must_haves:
  truths:
    - "Validation report shows before/after comparison across profiles"
    - "Manual checklist enables systematic in-app verification"
    - "Results document whether specific notes score higher than generic"
  artifacts:
    - path: "scripts/validation-results/validation-report.md"
      provides: "Documented validation results"
      contains: "inverted"
    - path: ".planning/phases/05-validation/manual-testing-checklist.md"
      provides: "In-app testing guide"
      contains: "checklist"
  key_links:
    - from: "scripts/validation-results/validation-report.md"
      to: "scripts/validate-scoring.ts"
      via: "generated by running script"
      pattern: "npm run validate-scoring"
---

<objective>
Execute validation, generate report, and create manual testing checklist for in-app verification.

Purpose: Document validation results and enable manual verification that scoring feels right in the app
Output: Markdown validation report and manual testing checklist
</objective>

<execution_context>
@/Users/kristianoftedal/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kristianoftedal/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-validation/05-01-SUMMARY.md

Source files:
@scripts/validate-scoring.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run validation and generate markdown report</name>
  <files>scripts/validate-scoring.ts, scripts/validation-results/validation-report.md</files>
  <action>
1. Create output directory: `scripts/validation-results/`

2. Modify validate-scoring.ts to output markdown report:
   - Add `--report` flag that writes to `scripts/validation-results/validation-report.md`
   - Report structure:
     ```markdown
     # Scoring Validation Report

     Generated: YYYY-MM-DD

     ## Summary

     | Profile | Pass Rate | Specific Wins | Generic Wins |
     |---------|-----------|---------------|--------------|
     | inverted | XX% | NN | NN |
     | moderate | XX% | NN | NN |
     | data-driven | XX% | NN | NN |

     ## Detailed Results

     ### Test Case: berry-vs-structure-1
     Description: Specific berry notes should score higher than generic structure

     | Profile | Text 1 (specific) | Text 2 (generic) | Ratio | Pass? |
     |---------|-------------------|------------------|-------|-------|
     | inverted | X.XX | X.XX | X.XXx | YES |
     ...

     ## Interpretation

     [Analysis of whether the inverted profile correctly rewards specific tasting skill]
     ```

3. Run validation: `npm run validate-scoring -- --report`

4. Capture the output in the markdown file

IMPORTANT: Per CONTEXT.md, on failure: document and continue (don't block completion).
If some test cases fail, document which ones and why, but don't treat this as a blocker.
  </action>
  <verify>
  ```bash
  # Report file exists
  ls scripts/validation-results/validation-report.md

  # Report contains summary table
  grep -E "Pass Rate" scripts/validation-results/validation-report.md

  # Report contains all three profiles
  grep -c "inverted\|moderate\|data-driven" scripts/validation-results/validation-report.md
  ```
  </verify>
  <done>
  - Validation report generated with summary and detailed results
  - Report shows pass/fail rates per profile
  - Results documented even if some cases fail
  </done>
</task>

<task type="auto">
  <name>Task 2: Create manual testing checklist</name>
  <files>.planning/phases/05-validation/manual-testing-checklist.md</files>
  <action>
Create `.planning/phases/05-validation/manual-testing-checklist.md` with:

```markdown
# Manual Validation Checklist

Generated: YYYY-MM-DD

## Pre-requisites

- [ ] App running locally with `npm run dev`
- [ ] Profile set to `inverted` in `.env.local`: `NEXT_PUBLIC_WEIGHT_PROFILE=inverted`
- [ ] Database connected and wines loaded

## Test Cases

### TC-01: Specific Berry Terms

1. Navigate to wine tasting comparison
2. For any red wine, enter in smell field: "solbaer og kirsebær"
3. Enter in taste field: "kirsebær med bringebær"
4. Compare against the wine's actual notes
5. **Expected:** High match score (> 70%) if wine has similar berry notes
6. **Result:** [ ] Pass [ ] Fail
7. **Notes:** _______________

### TC-02: Generic Structure Terms

1. For same wine, enter in smell field: "frisk og balansert"
2. Enter in taste field: "god struktur"
3. Compare against wine
4. **Expected:** Lower score than TC-01 if wine has specific notes
5. **Result:** [ ] Pass [ ] Fail
6. **Notes:** _______________

### TC-03: Oak/Barrel Terms

1. Select wine with oak aging
2. Enter smell: "eik og vanilje fatpreg"
3. Enter taste: "fatlagret med toast"
4. **Expected:** High score if wine is oak-aged
5. **Result:** [ ] Pass [ ] Fail
6. **Notes:** _______________

### TC-04: Spice vs Acidity

1. Select spicy wine (e.g., Syrah, Zinfandel)
2. Enter smell: "pepper og nellik"
3. Compare to entering: "frisk syre"
4. **Expected:** Pepper notes should score higher if wine is spicy
5. **Result:** [ ] Pass [ ] Fail
6. **Notes:** _______________

### TC-05: Profile Switching

1. Set `NEXT_PUBLIC_WEIGHT_PROFILE=data-driven` in .env.local
2. Restart dev server
3. Repeat TC-01 and TC-02
4. **Expected:** Score difference should be smaller or reversed (generic terms score higher in data-driven)
5. **Result:** [ ] Pass [ ] Fail
6. **Notes:** _______________

## Summary

| Test | Pass | Fail | Notes |
|------|------|------|-------|
| TC-01 | [ ] | [ ] | |
| TC-02 | [ ] | [ ] | |
| TC-03 | [ ] | [ ] | |
| TC-04 | [ ] | [ ] | |
| TC-05 | [ ] | [ ] | |

## Sign-off

- [ ] All critical tests pass
- [ ] Inverted profile rewards specific tasting notes
- [ ] Profile switching works as expected

Verified by: _______________
Date: _______________
```

Note: This checklist is for user to complete manually - it defines what to test, not the results.
  </action>
  <verify>
  ```bash
  # Checklist exists
  cat .planning/phases/05-validation/manual-testing-checklist.md

  # Has test cases
  grep -c "TC-0" .planning/phases/05-validation/manual-testing-checklist.md
  ```
  </verify>
  <done>
  - Manual testing checklist created with 5 test cases
  - Checklist covers specific vs generic, profile switching
  - Clear pass/fail criteria defined
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete validation suite:
    - Automated validation script with 15+ test cases
    - Validation report comparing all three profiles
    - Manual testing checklist for in-app verification
  </what-built>
  <how-to-verify>
    1. Review validation report: `cat scripts/validation-results/validation-report.md`
       - Check that inverted profile has higher pass rate for specific_vs_generic cases
       - Verify specific terms get higher weights than generic terms

    2. Review manual checklist: `cat .planning/phases/05-validation/manual-testing-checklist.md`
       - Confirm test cases are clear and actionable

    3. (Optional) Run one manual test:
       - Start app: `npm run dev`
       - Try TC-01 from the checklist
       - Observe if specific berry terms produce expected results

    4. Confirm: Does the validation demonstrate that the inverted profile rewards specific tasting skill?
  </how-to-verify>
  <resume-signal>Type "approved" if validation shows expected behavior, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
```bash
# All artifacts exist
ls scripts/validation-results/validation-report.md
ls .planning/phases/05-validation/manual-testing-checklist.md

# Report has content
wc -l scripts/validation-results/validation-report.md  # Should be > 50 lines

# Checklist has test cases
grep -c "TC-0" .planning/phases/05-validation/manual-testing-checklist.md  # Should be >= 5
```
</verification>

<success_criteria>
- Validation report generated showing all three profiles compared
- Report documents whether specific notes score higher (pass/fail)
- Manual testing checklist created with 5+ test cases
- Human verification confirms scoring rewards tasting skill appropriately
</success_criteria>

<output>
After completion, create `.planning/phases/05-validation/05-02-SUMMARY.md`
</output>
